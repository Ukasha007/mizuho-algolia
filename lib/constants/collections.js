export const CMS_COLLECTIONS = {
  AMERICAS_PEOPLE: {
    id: 'americas-people',
    name: 'Americas People',
    endpoint: 'americas-people',
    region: 'americas',
    envVar: 'CMS_AMERICAS_PEOPLE',
    priority: 1
  },
  AMERICAS_EVENTS: {
    id: 'americas-events',
    name: 'Americas Events',
    endpoint: 'americas-events',
    region: 'americas',
    envVar: 'CMS_AMERICAS_EVENTS',
    priority: 2
  },
  AMERICAS_INSIGHTS: {
    id: 'americas-insights',
    name: 'Americas Insights',
    endpoint: 'americas-insights',
    region: 'americas',
    envVar: 'CMS_AMERICAS_INSIGHTS',
    priority: 3
  },
  AMERICAS_AWARDS: {
    id: 'americas-awards',
    name: 'Americas Awards',
    endpoint: 'americas-awards',
    region: 'americas',
    envVar: 'CMS_AMERICAS_AWARDS',
    priority: 4
  },
  AMERICAS_NEWS: {
    id: 'americas-news',
    name: 'Americas News',
    endpoint: 'americas-news',
    region: 'americas',
    envVar: 'CMS_AMERICAS_NEWS',
    priority: 5
  },
  BRAZIL_INFORMATION: {
    id: 'brazil-information',
    name: 'Brazil Information',
    endpoint: 'brazil-information',
    region: 'americas',
    envVar: 'CMS_BRAZIL_INFORMATION',
    priority: 6
  },
  BANK_NEWS: {
    id: 'bank-news',
    name: 'Bank News',
    endpoint: 'bank-news',
    region: 'mizuho-bank',
    envVar: 'CMS_BANK_NEWS',
    priority: 7
  },
  SECURITIES_NEWS: {
    id: 'securities-news',
    name: 'Securities News',
    endpoint: 'securities-news',
    region: 'mizuho-securities',
    envVar: 'CMS_SECURITIES_NEWS',
    priority: 8
  },
  TRUST_AND_BANKING_NEWS: {
    id: 'trust-and-banking-news',
    name: 'Trust and Banking News',
    endpoint: 'trust-and-banking-news',
    region: 'mizuho-trust-banking',
    envVar: 'CMS_TRUST_AND_BANKING_NEWS',
    priority: 9
  },
  ASIA_PACIFIC_INSIGHTS: {
    id: 'asia-pacific-insights',
    name: 'Asia-Pacific Insights',
    endpoint: 'asia-pacific-insights',
    region: 'asia-pacific',
    envVar: 'CMS_ASIA_PACIFIC_INSIGHTS',
    priority: 10
  },
  ASIA_PACIFIC_NEWS: {
    id: 'asia-pacific-news',
    name: 'Asia-Pacific News',
    endpoint: 'asia-pacific-news',
    region: 'asia-pacific',
    envVar: 'CMS_ASIA_PACIFIC_NEWS',
    priority: 11
  },
  MALAYSIA_INFORMATION: {
    id: 'malaysia-information',
    name: 'Malaysia Information',
    endpoint: 'malaysia-information',
    region: 'asia-pacific',
    envVar: 'CMS_MALAYSIA_INFORMATION',
    priority: 12
  },
  HONG_KONG_INFORMATION: {
    id: 'hong-kong-information',
    name: 'Hong Kong Information',
    endpoint: 'hong-kong-information',
    region: 'asia-pacific',
    envVar: 'CMS_HONG_KONG_INFORMATION',
    priority: 13
  },
  SINGAPORE_INFORMATION: {
    id: 'singapore-information',
    name: 'Singapore Information',
    endpoint: 'singapore-information',
    region: 'asia-pacific',
    envVar: 'CMS_SINGAPORE_INFORMATION',
    priority: 14
  },
  TAIWAN_INFORMATION: {
    id: 'taiwan-information',
    name: 'Taiwan Information',
    endpoint: 'taiwan-information',
    region: 'asia-pacific',
    envVar: 'CMS_TAIWAN_INFORMATION',
    priority: 15
  },
  GIFT_CITY_INFORMATION: {
    id: 'gift-city-information',
    name: 'Gift City Information',
    endpoint: 'gift-city-information',
    region: 'asia-pacific',
    envVar: 'CMS_GIFT_CITY_INFORMATION',
    priority: 16
  },
  JAPAN_INTL_CARDS: {
    id: 'japan-intl-cards',
    name: 'Japan International Cards',
    endpoint: 'japan-intl-cards',
    region: 'japan',
    envVar: 'CMS_JAPAN_INTL_CARDS',
    priority: 17
  },
  EMEA_NEWS: {
    id: 'emea-news',
    name: 'EMEA News',
    endpoint: 'emea-news',
    region: 'europe-middle-east-africa',
    envVar: 'CMS_EMEA_NEWS',
    priority: 18
  },
  EMEA_EVENTS: {
    id: 'emea-events',
    name: 'EMEA Events',
    endpoint: 'emea-events',
    region: 'europe-middle-east-africa',
    envVar: 'CMS_EMEA_EVENTS',
    priority: 19
  },
  EMEA_PEOPLE: {
    id: 'emea-people',
    name: 'EMEA People',
    endpoint: 'emea-people',
    region: 'europe-middle-east-africa',
    envVar: 'CMS_EMEA_PEOPLE',
    priority: 20
  },
  EMEA_LEADERS: {
    id: 'emea-leaders',
    name: 'EMEA Leaders',
    endpoint: 'emea-leaders',
    region: 'europe-middle-east-africa',
    envVar: 'CMS_EMEA_LEADERS',
    priority: 21
  },
  FRANCE_INFORMATION: {
    id: 'france-information',
    name: 'France Information',
    endpoint: 'france-information',
    region: 'europe-middle-east-africa',
    envVar: 'CMS_FRANCE_INFORMATION',
    priority: 22
  },
  SAUDI_ARABIA_INFORMATION: {
    id: 'saudi-arabia-information',
    name: 'Saudi Arabia Information',
    endpoint: 'saudi-arabia-information',
    region: 'europe-middle-east-africa',
    envVar: 'CMS_SAUDI_ARABIA_INFORMATION',
    priority: 23
  },
  RUSSIA_INFORMATION: {
    id: 'russia-information',
    name: 'Russia Information',
    endpoint: 'russia-information',
    region: 'europe-middle-east-africa',
    envVar: 'CMS_RUSSIA_INFORMATION',
    priority: 24
  },
  BEYOND_THE_OBVIOUS: {
    id: 'beyond-the-obvious',
    name: 'Beyond The Obvious',
    endpoint: 'beyond-the-obvious',
    region: 'worldwide',
    envVar: 'CMS_BEYOND_THE_OBVIOUS',
    priority: 25
  },
  GLOBAL_NEWS: {
    id: 'global-news',
    name: 'Global News',
    endpoint: 'global-news',
    region: 'worldwide',
    envVar: 'CMS_GLOBAL_NEWS',
    priority: 26
  },
  GLOBAL_NEWS_RELEASES: {
    id: 'global-news-releases',
    name: 'Global News Releases',
    endpoint: 'global-news-releases',
    region: 'worldwide',
    envVar: 'CMS_GLOBAL_NEWS_RELEASES',
    priority: 27
  },
  MIZUHO_GLOBAL_SERVICES: {
    id: 'mizuho-global-services',
    name: 'Mizuho Global Services',
    endpoint: 'mizuho-global-services',
    region: 'worldwide',
    envVar: 'CMS_MIZUHO_GLOBAL_SERVICES',
    priority: 28
  },
  NEWS_AND_ANNOUNCEMENTS: {
    id: 'news-and-announcements',
    name: 'News and Announcements',
    endpoint: 'news-and-announcements',
    region: 'worldwide',
    envVar: 'CMS_NEWS_AND_ANNOUNCEMENTS',
    priority: 29
  },
  DIGITAL_ARTICLES: {
    id: 'digital-articles',
    name: 'Digital Articles',
    endpoint: 'digital-articles',
    region: 'worldwide',
    envVar: 'CMS_DIGITAL_ARTICLES',
    priority: 30
  },
  FINANCIAL_STATEMENTS_DATA: {
    id: 'financial-statements-data',
    name: 'Financial Statements Data',
    endpoint: 'financial-statements-data',
    region: 'worldwide',
    envVar: 'CMS_FINANCIAL_STATEMENTS_DATA',
    priority: 31
  },
  BASEL_CAPITAL_DATA: {
    id: 'basel-capital-data',
    name: 'Basel Capital Data',
    endpoint: 'basel-capital-data',
    region: 'worldwide',
    envVar: 'CMS_BASEL_CAPITAL_DATA',
    priority: 32
  },
  LIQUIDITY_DATA: {
    id: 'liquidity-data',
    name: 'Liquidity Data',
    endpoint: 'liquidity-data',
    region: 'worldwide',
    envVar: 'CMS_LIQUIDITY_DATA',
    priority: 33
  },
  ANNUAL_DATA: {
    id: 'annual-data',
    name: 'Annual Data',
    endpoint: 'annual-data',
    region: 'worldwide',
    envVar: 'CMS_ANNUAL_DATA',
    priority: 34
  }
};

export const CONTENT_TYPES = {
  STATIC_PAGE: 'static-page',
  CMS_ITEM: 'cms-item',
  NEWS_ARTICLE: 'news-article',
  INSIGHT: 'insight',
  EVENT: 'event',
  PERSON: 'person',
  REPORT: 'report',
  RESEARCH: 'research'
};

export const SEARCH_PRIORITIES = {
  HIGH: 3,
  MEDIUM: 2,
  LOW: 1
};

export const FIELD_MAPPINGS = {
  COMMON: {
    title: 'name',
    slug: 'slug',
    summary: 'summary', // Will fallback to 'body' if not found
    content: 'content',
    body: 'body', // Common field for body content
    publishDate: 'published-date',
    lastModified: 'last-modified',
    region: 'region',
    tags: 'tags',
    category: 'category',
    featured: 'featured',
    status: 'status'
  },
  NEWS: {
    headline: 'headline',
    excerpt: 'excerpt',
    author: 'author',
    newsType: 'news-type',
    releaseDate: 'release-date',
    documentAttachment: 'document-attachment',
    externalLink: 'external-link'
  },
  INSIGHTS: {
    subtitle: 'subtitle',
    keyPoints: 'key-points',
    relatedTopics: 'related-topics',
    downloadLink: 'download-link',
    reportAttachment: 'report-attachment',
    pdfForDownload: 'pdf-for-download',
    externalLink: 'external-link'
  },
  EVENTS: {
    startDate: 'start-date',
    endDate: 'end-date',
    location: 'location',
    eventType: 'event-type',
    registrationLink: 'registration-link'
  },
  PEOPLE: {
    firstName: 'first-name',
    lastName: 'last-name',
    position: 'position',
    department: 'department',
    bio: 'biography',
    photo: 'photo'
  },
  'GLOBAL_NEWS': {
    headline: 'headline',
    excerpt: 'excerpt',
    author: 'author',
    newsType: 'news-type',
    releaseDate: 'release-date',
    documentAttachment: 'document-attachment',
    externalLink: 'external-link'
  },
  'GLOBAL_NEWS_RELEASES': {
    headline: 'headline',
    excerpt: 'excerpt',
    author: 'author',
    newsType: 'news-type',
    releaseDate: 'release-date',
    pdfAsset: 'pdf-asset',
    externalLink: 'external-link'
  },
  // Specific News Collection Mappings
  'BANK_NEWS': {
    headline: 'headline',
    excerpt: 'excerpt',
    author: 'author',
    newsType: 'news-type',
    releaseDate: 'release-date',
    documentAttachment: 'document-attachment',
    externalLink: 'external-link'
  },
  'SECURITIES_NEWS': {
    headline: 'headline',
    excerpt: 'excerpt',
    author: 'author',
    newsType: 'news-type',
    releaseDate: 'release-date',
    documentAttachment: 'document-attachment',
    externalLink: 'external-link'
  },
  'TRUST_AND_BANKING_NEWS': {
    headline: 'headline',
    excerpt: 'excerpt',
    author: 'author',
    newsType: 'news-type',
    releaseDate: 'release-date',
    documentAttachment: 'document-attachment',
    externalLink: 'external-link'
  },
  'EMEA_NEWS': {
    headline: 'headline',
    excerpt: 'excerpt',
    author: 'author',
    newsType: 'news-type',
    releaseDate: 'release-date',
    documentAttachment: 'document-attachment',
    externalLink: 'link-url'
  },
  'AMERICAS_NEWS': {
    headline: 'headline',
    excerpt: 'excerpt',
    author: 'author',
    newsType: 'news-type',
    releaseDate: 'release-date',
    externalLink: 'link-url'
  },
  'ASIA_PACIFIC_NEWS': {
    headline: 'headline',
    excerpt: 'excerpt',
    author: 'author',
    newsType: 'news-type',
    releaseDate: 'release-date',
    documentAttachment: 'document-attachment',
    externalLink: 'link-url'
  },

  // Specific Insights Collection Mappings
  'AMERICAS_INSIGHTS': {
    summary: 'blurb', // Americas Insights uses 'blurb' for summary
    body: 'body', // Also has body content
    subtitle: 'subtitle',
    keyPoints: 'key-points',
    relatedTopics: 'related-topics',
    downloadLink: 'download-link',
    pdfForDownload: 'pdf-for-download',
    externalLink: 'external-link'
  },
  'ASIA_PACIFIC_INSIGHTS': {
    subtitle: 'subtitle',
    keyPoints: 'key-points',
    relatedTopics: 'related-topics',
    downloadLink: 'download-link',
    reportAttachment: 'report-attachment',
    externalLink: 'external-link'
  },

  'BEYOND_THE_OBVIOUS': {
    title: 'name',
    slug: 'slug',
    summary: 'blurb',
    content: 'body',
    publishDate: 'date',
    featuredInsight: 'featured-insight',
    isTranscriptCollapsed: 'is-transcript-collapsed',
    includeSocialMediaOptions: 'include-social-media-options',
    mediumType: 'medium-type',
    metaDescription: 'meta-description',
    metaKeywords: 'meta-keywords',
    seo: 'seo',
    type: 'type',
    industryTypes: 'industry-types',
    industryTypesResolved: 'industry-types-resolved',
    insightsType: 'insights-type',
    insightsTypeResolved: 'insights-type-resolved',
    otherInsightsCategory: 'other-insights-category',
    otherInsightsCategoryResolved: 'other-insights-category-resolved',
    areasOfInterest: 'area-of-interest',
    areasOfInterestResolved: 'area-of-interest-resolved',
    mainImage: 'main-image',
    pdfForDownload: 'pdf-for-download',
    externalLink: 'external-link',
    video: 'video'
  }
};

export function getCollectionById(id) {
  return Object.values(CMS_COLLECTIONS).find(collection => collection.id === id);
}

export function getAllCollections() {
  return Object.values(CMS_COLLECTIONS).sort((a, b) => a.priority - b.priority);
}

export function getFieldMapping(collectionId) {
  const mappingKey = collectionId.toUpperCase().replace(/-/g, '_');
  const specific = FIELD_MAPPINGS[mappingKey];
  return { ...FIELD_MAPPINGS.COMMON, ...(specific || {}) };
}

export function getCollectionIdFromEnv(collectionKey) {
  const collection = CMS_COLLECTIONS[collectionKey];
  if (!collection) return null;
  
  return process.env[collection.envVar] || null;
}

export function getConfiguredCollections() {
  const configured = [];
  
  Object.entries(CMS_COLLECTIONS).forEach(([key, collection]) => {
    const collectionId = process.env[collection.envVar];
    if (collectionId) {
      configured.push({
        ...collection,
        webflowId: collectionId
      });
    }
  });
  
  return configured.sort((a, b) => a.priority - b.priority);
}

export function getCollectionsByRegion(region) {
  return Object.values(CMS_COLLECTIONS)
    .filter(collection => collection.region === region || collection.region === 'worldwide')
    .sort((a, b) => a.priority - b.priority);
}

export default {
  CMS_COLLECTIONS,
  CONTENT_TYPES,
  SEARCH_PRIORITIES,
  FIELD_MAPPINGS,
  getCollectionById,
  getAllCollections,
  getFieldMapping
};